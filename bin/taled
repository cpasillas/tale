#!/usr/bin/env python

import sys
import os.path
from os.path import join, dirname
sys.path.insert(0, join(dirname(__file__), '..', 'lib'))

from tale.taled import TaleService
from planes.lazy import\
    serve,\
    PathService,\
    AdhocKitService,\
    LogService,\
    ResponseService

import os
import pwd
os.setuid(pwd.getpwnam('www-data')[2])

service = TaleService()
service = PathService(paths = {'session': service})
service = AdhocKitService(service)
#service = LogService(service)
service = ResponseService(service)
serve(service, port = 2380, debug = True)

